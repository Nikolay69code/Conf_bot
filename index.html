<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Гуманитарная помощь</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        // Определяем, запущен ли файл через сервер или открыт напрямую
        const isServer = window.location.protocol === 'http:' || window.location.protocol === 'https:';
        const staticPath = isServer ? '/static/' : '';
        
        // Динамически подключаем стили
        const link = document.createElement('link');
        link.rel = 'stylesheet';
        link.href = staticPath + 'styles.css';
        document.head.appendChild(link);
    </script>
</head>
<body>
    <div class="container">
        <div id="registration-form" class="form-container">
            <h2>Регистрация</h2>
            <div class="form-step" id="step-1">
                <h3>Выберите вашу роль</h3>
                <div class="button-group">
                    <button onclick="selectUserType('military')" class="btn">Военный</button>
                    <button onclick="selectUserType('volunteer')" class="btn">Волонтер</button>
                </div>
            </div>

            <div class="form-step hidden" id="step-2">
                <h3>Личная информация</h3>
                <div class="input-group">
                    <label for="fullName">ФИО</label>
                    <input type="text" id="fullName" placeholder="Введите ваше полное имя" class="input-field" pattern="[А-Яа-яЁё\s-]{2,100}" required>
                    <span class="error-message">Введите корректное ФИО (только русские буквы, пробелы и дефис)</span>
                </div>
                <div class="input-group">
                    <label for="phone">Телефон</label>
                    <input type="tel" id="phone" placeholder="+7 (___) ___-__-__" class="input-field" pattern="\+7\s\(\d{3}\)\s\d{3}-\d{2}-\d{2}" required>
                    <span class="error-message">Введите корректный номер телефона в формате +7 (XXX) XXX-XX-XX</span>
                </div>
                <button onclick="validatePersonalInfo()" class="btn">Продолжить</button>
            </div>

            <div class="form-step hidden" id="step-3">
                <h3>Информация об организации</h3>
                <div class="input-group">
                    <label for="orgType">Тип организации</label>
                    <input type="text" id="orgType" placeholder="Введите тип организации" class="input-field" required>
                </div>
                <div class="input-group">
                    <label for="orgName">Название организации</label>
                    <input type="text" id="orgName" placeholder="Введите название организации" class="input-field" required>
                </div>
                <div class="input-group">
                    <label for="contactPerson">Контактное лицо</label>
                    <input type="text" id="contactPerson" placeholder="Введите ФИО контактного лица" class="input-field" required>
                </div>
                <div class="input-group">
                    <label for="website">Сайт</label>
                    <input type="url" id="website" placeholder="https://example.com" class="input-field" pattern="https?://.+">
                    <span class="error-message">Введите корректный URL сайта</span>
                </div>
                <button onclick="validateOrgInfo()" class="btn">Продолжить</button>
            </div>

            <div class="form-step hidden" id="step-4">
                <h3>Категории помощи</h3>
                <div class="categories-grid">
                    <button onclick="toggleCategory('Продукты питания')" class="category-btn">Продукты питания</button>
                    <button onclick="toggleCategory('Одежда')" class="category-btn">Одежда</button>
                    <button onclick="toggleCategory('Медикаменты')" class="category-btn">Медикаменты</button>
                    <button onclick="toggleCategory('Техника')" class="category-btn">Техника</button>
                    <button onclick="toggleCategory('Другое')" class="category-btn">Другое</button>
                </div>
                <button onclick="validateCategories()" class="btn">Продолжить</button>
            </div>

            <div class="form-step hidden" id="step-5">
                <h3>Конкретные вещи/продукты</h3>
                <div class="input-group">
                    <label for="specificItems">Опишите конкретные вещи или продукты</label>
                    <textarea id="specificItems" placeholder="Опишите конкретные вещи или продукты, которые вам нужны или вы можете предоставить" class="input-field" required></textarea>
                </div>
                <button onclick="validateSpecificItems()" class="btn">Продолжить</button>
            </div>

            <div class="form-step hidden" id="step-6">
                <h3>Подтверждение данных</h3>
                <div id="confirmation-data"></div>
                <div class="button-group">
                    <button onclick="submitForm()" class="btn primary">Подтвердить</button>
                    <button onclick="restartForm()" class="btn secondary">Начать заново</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        // Динамически подключаем скрипт
        const script = document.createElement('script');
        script.src = staticPath + 'script.js';
        document.body.appendChild(script);
    </script>
</body>
</html>
